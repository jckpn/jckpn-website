<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Stop Criteria &#8212; lmblocks  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Objective Functions" href="objective_functions.html" />
    <link rel="prev" title="Blocks" href="blocks.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-lmblocks.stop_criteria">
<span id="stop-criteria"></span><h1>Stop Criteria<a class="headerlink" href="#module-lmblocks.stop_criteria" title="Link to this heading"></a></h1>
<p>Stop criteria are used to determine when to halt the generation of sequences.</p>
<p>To use a stop criterion, simply pass it as a parameter to the <cite>generate</cite>
function. Alternatively, it can be set as the <cite>stop_criteria_</cite> parameter in the
<cite>DecodingStrategy</cite> class, or as the <cite>repeat_until</cite> parameter of any Block.</p>
<p>Stop criteria can be combined using the <cite>Intersection</cite> and <cite>Union</cite> classes.</p>
<p>For example, a common stop criteria is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stop_criteria_</span> <span class="o">=</span> <span class="n">Union</span><span class="p">([</span><span class="n">StopOnEOS</span><span class="p">(),</span> <span class="n">MaxGeneratedTokens</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnEOS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StopOnEOS</span></span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnEOS" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates an EOS token.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnEOS.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnEOS.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnEOS.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnEOS.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnEOS.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnEOS.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnToken">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StopOnToken</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnToken" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates a specific token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>token</strong> (<em>int</em>) – The token to stop on.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnToken.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnToken.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnToken.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnToken.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnToken.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnToken.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnTokenSequence">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StopOnTokenSequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token_sequence</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnTokenSequence" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates a specific sequence of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>token_sequence</strong> (<em>list</em><em>[</em><em>int</em><em>] </em><em>| </em><em>Tensor</em>) – The sequence of tokens to stop on.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnTokenSequence.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnTokenSequence.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnTokenSequence.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnTokenSequence.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnTokenSequence.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnTokenSequence.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnWord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StopOnWord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">word</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnWord" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates a specific word.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>word</strong> (<em>str</em>) – The word to stop on.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnWord.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnWord.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnWord.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnWord.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.StopOnWord.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.StopOnWord.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Intersection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Intersection" title="Link to this definition"></a></dt>
<dd><p>Stops generation when all of the provided criteria are met.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>list</em><em>[</em><em>StopCriterion</em><em>]</em>) – A list of stop criteria.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Intersection.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.Intersection.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Intersection.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Intersection.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Intersection.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Intersection.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Union">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Union" title="Link to this definition"></a></dt>
<dd><p>Stops generation when any of the provided criteria are met.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>list</em><em>[</em><em>StopCriterion</em><em>]</em>) – A list of stop criteria.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Union.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.Union.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Union.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Union.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.Union.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.Union.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxLength">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaxLength</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxLength" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates a sequence of a certain length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_length</strong> (<em>int</em>) – The maximum length of the sequence.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxLength.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.MaxLength.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxLength.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxLength.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxLength.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxLength.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxGeneratedTokens">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaxGeneratedTokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_new_tokens</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxGeneratedTokens" title="Link to this definition"></a></dt>
<dd><p>Stops generation when the model generates a certain number of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_new_tokens</strong> (<em>int</em>) – The maximum number of tokens to generate.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxGeneratedTokens.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#lmblocks.stop_criteria.MaxGeneratedTokens.label" title="Link to this definition"></a></dt>
<dd><p>The label shown on the graph. Updates dynamically with parameter changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxGeneratedTokens.check_batch">
<span class="sig-name descname"><span class="pre">check_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxGeneratedTokens.check_batch" title="Link to this definition"></a></dt>
<dd><p>Checks if a batch of sequences meets the stop criterion, and marks the
sequences that do. Marked sequences cannot be generated further
(although other sequences in the batch can if they are not marked).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>SequenceBatch</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lmblocks.stop_criteria.MaxGeneratedTokens.check_batch_list">
<span class="sig-name descname"><span class="pre">check_batch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lmblocks.stop_criteria.MaxGeneratedTokens.check_batch_list" title="Link to this definition"></a></dt>
<dd><p>Checks if a list of batches of sequences meets the stop criterion, and
marks the sequences within the batch that do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>[</em><em>SequenceBatch</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">lmblocks</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate.html">Text and Sequence Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="decoding_strategies.html">Decoding Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="blocks.html">Blocks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Stop Criteria</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnEOS"><code class="docutils literal notranslate"><span class="pre">StopOnEOS</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnEOS.label"><code class="docutils literal notranslate"><span class="pre">StopOnEOS.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnEOS.check_batch"><code class="docutils literal notranslate"><span class="pre">StopOnEOS.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnEOS.check_batch_list"><code class="docutils literal notranslate"><span class="pre">StopOnEOS.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnToken"><code class="docutils literal notranslate"><span class="pre">StopOnToken</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnToken.label"><code class="docutils literal notranslate"><span class="pre">StopOnToken.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnToken.check_batch"><code class="docutils literal notranslate"><span class="pre">StopOnToken.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnToken.check_batch_list"><code class="docutils literal notranslate"><span class="pre">StopOnToken.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnTokenSequence"><code class="docutils literal notranslate"><span class="pre">StopOnTokenSequence</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnTokenSequence.label"><code class="docutils literal notranslate"><span class="pre">StopOnTokenSequence.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnTokenSequence.check_batch"><code class="docutils literal notranslate"><span class="pre">StopOnTokenSequence.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnTokenSequence.check_batch_list"><code class="docutils literal notranslate"><span class="pre">StopOnTokenSequence.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnWord"><code class="docutils literal notranslate"><span class="pre">StopOnWord</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnWord.label"><code class="docutils literal notranslate"><span class="pre">StopOnWord.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnWord.check_batch"><code class="docutils literal notranslate"><span class="pre">StopOnWord.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.StopOnWord.check_batch_list"><code class="docutils literal notranslate"><span class="pre">StopOnWord.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.Intersection"><code class="docutils literal notranslate"><span class="pre">Intersection</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Intersection.label"><code class="docutils literal notranslate"><span class="pre">Intersection.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Intersection.check_batch"><code class="docutils literal notranslate"><span class="pre">Intersection.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Intersection.check_batch_list"><code class="docutils literal notranslate"><span class="pre">Intersection.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.Union"><code class="docutils literal notranslate"><span class="pre">Union</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Union.label"><code class="docutils literal notranslate"><span class="pre">Union.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Union.check_batch"><code class="docutils literal notranslate"><span class="pre">Union.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.Union.check_batch_list"><code class="docutils literal notranslate"><span class="pre">Union.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.MaxLength"><code class="docutils literal notranslate"><span class="pre">MaxLength</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxLength.label"><code class="docutils literal notranslate"><span class="pre">MaxLength.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxLength.check_batch"><code class="docutils literal notranslate"><span class="pre">MaxLength.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxLength.check_batch_list"><code class="docutils literal notranslate"><span class="pre">MaxLength.check_batch_list()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lmblocks.stop_criteria.MaxGeneratedTokens"><code class="docutils literal notranslate"><span class="pre">MaxGeneratedTokens</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxGeneratedTokens.label"><code class="docutils literal notranslate"><span class="pre">MaxGeneratedTokens.label</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxGeneratedTokens.check_batch"><code class="docutils literal notranslate"><span class="pre">MaxGeneratedTokens.check_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lmblocks.stop_criteria.MaxGeneratedTokens.check_batch_list"><code class="docutils literal notranslate"><span class="pre">MaxGeneratedTokens.check_batch_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objective_functions.html">Objective Functions</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="blocks.html" title="previous chapter">Blocks</a></li>
      <li>Next: <a href="objective_functions.html" title="next chapter">Objective Functions</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Jack Paine, Ed Gillman, Jake Dorman & Jamie Mair.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/stop_criteria.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>